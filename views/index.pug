doctype html
html(lang="en")
  include includes/header.pug
  body.bg-gray-50.min-h-screen.flex.flex-col
    include includes/navbar.pug

    main.flex-grow
      .container.mx-auto.px-4.py-12
        .max-w-3xl.mx-auto.text-center
          h1#counter.text-4xl.font-bold.text-dark-900.mb-8.tracking-tight.relative
            span.inline-block.animate-pulse Loading...
            .absolute.h-1.w-24.bg-primary-500.bottom-0.left-1/2.rounded-full.mt-2(style="transform: translateX(-50%)")
          
          form.mb-12(action='/search')
            .relative.max-w-xl.mx-auto
              input.search-input.w-full(
                placeholder='Search for magnets...' 
                id='search' 
                type='search' 
                name='q'
                autocomplete="off"
              )
              button(
                type="submit"
                style="position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%);"
                class="text-primary-600 hover:text-primary-800 transition-colors"
              )
                i.fas.fa-search
          
          .card.max-w-2xl.mx-auto.bg-white.rounded-xl.shadow-elegant.overflow-hidden
            .p-8
              h2.text-2xl.font-semibold.text-dark-800.mb-4 About
              p.text-dark-600.text-lg.leading-relaxed
                | This is a database of magnet URIs that have been spotted in the wild 
                | on the DHT swarm via the BitTorrent protocol.
              
              ul.mt-6.space-y-3
                li.flex.items-start
                  i.fas.fa-check-circle.text-primary-500.mt-1.mr-3
                  span.text-dark-700 Real-time DHT crawling and indexing
                li.flex.items-start
                  i.fas.fa-check-circle.text-primary-500.mt-1.mr-3
                  span.text-dark-700 Fast search through millions of magnets
                li.flex.items-start
                  i.fas.fa-check-circle.text-primary-500.mt-1.mr-3
                  span.text-dark-700 Constantly updated with latest discoveries

    include includes/footer.pug

    script.
      const ws = new WebSocket("#{wsServerAddress}");

      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        const counter = document.getElementById('counter');
        counter.innerHTML = `<span class="bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-secondary-600">${data.count.toLocaleString()}</span> <span class="text-gray-700">magnets indexed</span>`;
        counter.classList.remove('animate-pulse');
      };

      ws.onopen = () => {
        console.log('WebSocket connection established.');
      };

      ws.onerror = (error) => {
        console.error('WebSocket Error:', error);
        const counter = document.getElementById('counter');
        counter.textContent = "Server not responding...";
        counter.classList.add('text-red-500');
      };
